import{Q as ct,S as at,i as lt,s as rt,k as g,l as E,m as T,h as i,n as b,b as O,F as z,R as nt,H as ot,q as S,a as k,r as y,c as D,E as r,u as G,e as X,y as it,M as ht,z as ft,A as ut,g as _t,d as dt,B as pt}from"../chunks/index.7f717b3c.js";import{p as mt}from"../chunks/stores.568552a9.js";import{r as vt}from"../chunks/singletons.d0dcf706.js";const gt=vt([],o=>{{const s=e=>{const n=new URL("/api/metrics",e.origin),l=e.searchParams.get("limit"),f=e.searchParams.get("secret");f&&(n.searchParams.append("secret",f),l&&n.searchParams.append("limit",l)),fetch(n).then(u=>u.json()).then(u=>{const $=u.metrics;$.reverse(),$.forEach(_=>{_.entries.sort((d,c)=>d.count<c.count?1:d.count>c.count?-1:0)}),o($)}).catch(u=>{console.error(u),o([])})},a=ct(mt).url;s(a);const t=setInterval(()=>{s(a)},6e4);return()=>clearInterval(t)}});function Z(o,s,a){const t=o.slice();return t[1]=s[a],t}function x(o,s,a){const t=o.slice();return t[4]=s[a],t}function tt(o){let s,a,t=o[4].path+"",e,n,l,f=o[4].status+"",u,$,_,d=o[4].count+"",c,w;return{c(){s=g("tr"),a=g("td"),e=S(t),n=k(),l=g("td"),u=S(f),$=k(),_=g("td"),c=S(d),w=k(),this.h()},l(p){s=E(p,"TR",{class:!0});var m=T(s);a=E(m,"TD",{class:!0});var P=T(a);e=y(P,t),P.forEach(i),n=D(m),l=E(m,"TD",{class:!0});var R=T(l);u=y(R,f),R.forEach(i),$=D(m),_=E(m,"TD",{class:!0});var B=T(_);c=y(B,d),B.forEach(i),w=D(m),m.forEach(i),this.h()},h(){b(a,"class","svelte-132p95t"),b(l,"class","row-status svelte-132p95t"),b(_,"class","row-hits svelte-132p95t"),b(s,"class","svelte-132p95t")},m(p,m){O(p,s,m),r(s,a),r(a,e),r(s,n),r(s,l),r(l,u),r(s,$),r(s,_),r(_,c),r(s,w)},p(p,m){m&1&&t!==(t=p[4].path+"")&&G(e,t),m&1&&f!==(f=p[4].status+"")&&G(u,f),m&1&&d!==(d=p[4].count+"")&&G(c,d)},d(p){p&&i(s)}}}function et(o){let s=!o[4].path.startsWith("/blog/preview-"),a,t=s&&tt(o);return{c(){t&&t.c(),a=X()},l(e){t&&t.l(e),a=X()},m(e,n){t&&t.m(e,n),O(e,a,n)},p(e,n){n&1&&(s=!e[4].path.startsWith("/blog/preview-")),s?t?t.p(e,n):(t=tt(e),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&i(a)}}}function st(o){let s,a,t,e,n=o[1].start+"",l,f,u=o[1].end+"",$,_,d,c,w,p,m,P,R,B,M,U,V,A,W,C=o[1].entries,H=[];for(let v=0;v<C.length;v+=1)H[v]=et(x(o,C,v));return{c(){s=g("div"),a=g("table"),t=g("caption"),e=g("h2"),l=S(n),f=S(" – "),$=S(u),_=k(),d=g("thead"),c=g("tr"),w=g("th"),p=S("Path"),m=k(),P=g("th"),R=S("Status"),B=k(),M=g("th"),U=S("Hits"),V=k(),A=g("tbody");for(let v=0;v<H.length;v+=1)H[v].c();W=k(),this.h()},l(v){s=E(v,"DIV",{class:!0});var I=T(s);a=E(I,"TABLE",{class:!0});var h=T(a);t=E(h,"CAPTION",{class:!0});var q=T(t);e=E(q,"H2",{});var L=T(e);l=y(L,n),f=y(L," – "),$=y(L,u),L.forEach(i),q.forEach(i),_=D(h),d=E(h,"THEAD",{class:!0});var F=T(d);c=E(F,"TR",{class:!0});var N=T(c);w=E(N,"TH",{class:!0});var Q=T(w);p=y(Q,"Path"),Q.forEach(i),m=D(N),P=E(N,"TH",{class:!0});var Y=T(P);R=y(Y,"Status"),Y.forEach(i),B=D(N),M=E(N,"TH",{class:!0});var J=T(M);U=y(J,"Hits"),J.forEach(i),N.forEach(i),F.forEach(i),V=D(h),A=E(h,"TBODY",{class:!0});var K=T(A);for(let j=0;j<H.length;j+=1)H[j].l(K);K.forEach(i),h.forEach(i),W=D(I),I.forEach(i),this.h()},h(){b(t,"class","svelte-132p95t"),b(w,"class","svelte-132p95t"),b(P,"class","row-status svelte-132p95t"),b(M,"class","row-hits svelte-132p95t"),b(c,"class","svelte-132p95t"),b(d,"class","svelte-132p95t"),b(A,"class","svelte-132p95t"),b(a,"class","svelte-132p95t"),b(s,"class","day-range svelte-132p95t")},m(v,I){O(v,s,I),r(s,a),r(a,t),r(t,e),r(e,l),r(e,f),r(e,$),r(a,_),r(a,d),r(d,c),r(c,w),r(w,p),r(c,m),r(c,P),r(P,R),r(c,B),r(c,M),r(M,U),r(a,V),r(a,A);for(let h=0;h<H.length;h+=1)H[h].m(A,null);r(s,W)},p(v,I){if(I&1&&n!==(n=v[1].start+"")&&G(l,n),I&1&&u!==(u=v[1].end+"")&&G($,u),I&1){C=v[1].entries;let h;for(h=0;h<C.length;h+=1){const q=x(v,C,h);H[h]?H[h].p(q,I):(H[h]=et(q),H[h].c(),H[h].m(A,null))}for(;h<H.length;h+=1)H[h].d(1);H.length=C.length}},d(v){v&&i(s),nt(H,v)}}}function Et(o){let s,a=o[0],t=[];for(let e=0;e<a.length;e+=1)t[e]=st(Z(o,a,e));return{c(){s=g("section");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){s=E(e,"SECTION",{id:!0});var n=T(s);for(let l=0;l<t.length;l+=1)t[l].l(n);n.forEach(i),this.h()},h(){b(s,"id","metrics")},m(e,n){O(e,s,n);for(let l=0;l<t.length;l+=1)t[l].m(s,null)},p(e,[n]){if(n&1){a=e[0];let l;for(l=0;l<a.length;l+=1){const f=Z(e,a,l);t[l]?t[l].p(f,n):(t[l]=st(f),t[l].c(),t[l].m(s,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=a.length}},i:z,o:z,d(e){e&&i(s),nt(t,e)}}}function Tt(o,s,a){let t;return ot(o,gt,e=>a(0,t=e)),[t]}class bt extends at{constructor(s){super(),lt(this,s,Tt,Et,rt,{})}}function $t(o){let s,a,t,e,n,l,f,u,$,_,d;return _=new bt({}),{c(){s=g("meta"),a=k(),t=g("div"),e=g("h1"),n=S("Statistics"),l=k(),f=g("p"),u=S("Below are statistics about HTTP GET responses from the past 30 days."),$=k(),it(_.$$.fragment),this.h()},l(c){const w=ht("svelte-1gm69sh",document.head);s=E(w,"META",{name:!0,content:!0}),w.forEach(i),a=D(c),t=E(c,"DIV",{class:!0});var p=T(t);e=E(p,"H1",{});var m=T(e);n=y(m,"Statistics"),m.forEach(i),l=D(p),f=E(p,"P",{});var P=T(f);u=y(P,"Below are statistics about HTTP GET responses from the past 30 days."),P.forEach(i),$=D(p),ft(_.$$.fragment,p),p.forEach(i),this.h()},h(){document.title="Site Statistics | Timo Tiuraniemi",b(s,"name","description"),b(s,"content","Site Statistics"),b(t,"class","content")},m(c,w){r(document.head,s),O(c,a,w),O(c,t,w),r(t,e),r(e,n),r(t,l),r(t,f),r(f,u),r(t,$),ut(_,t,null),d=!0},p:z,i(c){d||(_t(_.$$.fragment,c),d=!0)},o(c){dt(_.$$.fragment,c),d=!1},d(c){i(s),c&&i(a),c&&i(t),pt(_)}}}class St extends at{constructor(s){super(),lt(this,s,null,$t,rt,{})}}export{St as default};
